---
title: "The History Major since the Great Recession"
author: "Ben Schmidt"
date: "The Atlantic.com: August 23, 2018"
output:
  pdf_document: default
  html_document: default
  word_document: default
---

```{r, include = FALSE}
knitr::opts_chunk$set(echo=FALSE, message = FALSE, warning = FALSE, cache = TRUE, fig.width = 8, fig.height = 4)
```


```{r}
race_percents = data %>% 
  filter(AWLEVEL %in% c(5, 7, 15), year == 2017, MAJORNUM==1) %>% 
  group_by(race, UNITID, AWLEVEL) %>% summarize(count=sum(degrees)) 


lotsa_aliens = race_percents %>% group_by(UNITID, AWLEVEL) %>% mutate(share = count/sum(count)) %>% arrange(-count) %>% filter(race == "Nonresident alien", share > .01) %>% inner_join(characteristics %>% select(UNITID, INSTNM))


tuition = read_csv("~/Downloads/ic2017_ay.csv")

lotsa_aliens %>% inner_join(characteristics) %>% arrange(-share) %>% filter(count > 100, AWLEVEL==15) %>% select(share, count, INSTNM) %>% arrange(-count)

tuition_fees = tuition %>% select(UNITID, TUITION3, FEE3, TUITION7, FEE7) %>% gather(variable, tuition_fees, -UNITID) %>% mutate(AWLEVEL = ifelse(grepl("1|3", variable), 5, 7)) %>% group_by(UNITID, AWLEVEL) %>% summarize(tuition_fees = sum(as.numeric(tuition_fees, na.rm = T)))

lotsa_aliens %>% inner_join(characteristics) %>% inner_join(tuition_fees) %>% select(count, share, INSTNM, count, tuition_fees) %>%
  group_by(INSTNM, AWLEVEL) %>% mutate(revenue = tuition_fees*count) %>%
  group_by(INSTNM) %>%
  mutate(rev_factor = ifelse(AWLEVEL==5, 4, 1.5)) %>%
  mutate(revenue = revenue * rev_factor) %>%
  filter(sum(revenue) > 100e06) %>%
  ggplot() + geom_bar(aes(x=reorder(INSTNM, revenue), y=revenue, fill=factor(AWLEVEL)), stat="identity") + coord_flip() + 
  scale_y_continuous(labels=scales::dollar) + scale_fill_discrete("degree type", breaks = c(5,7), labels=c("Bachelors", "Masters")) + labs(title="Estimated tuition contribution from international students", subtitle="Extremely back of the envelope--\nthere are more precise ways to do this even just with IPEDS data")
                                                                                                                                      
?scale_fill_discrete
summarize(  ma = sum(tuition_fees*count*(AWLEVEL==7)), ug = sum(tuition_fees*count*(AWLEVEL==5))) %>% arrange(-(ma + ug)) %>% head(30) %>% gather(degree_type, revenue)
%>% ggplot() + geom_bar(aes(x=INSTNM, y=revenue), stat="identity")

data %>% filter(AWLEVEL==7, UNITID == 190150, year == 2017) %>% group_by(UNITID, MAJORNUM, AWLEVEL, CIPCODE) %>% summarize(count=sum(degrees)) %>% acadjoin %>% arrange(-count)

head(tuition)
```

```{r, cache = TRUE}
# Preparatory functions to get data.
source("read_cips.R")

characteristics = read_csv("hd2017.csv")
cips = return_cips()
data = return_data()

source("EDA_functions.R")

data = data %>%
  filter(CIPCODE != "99.0000", CIPCODE != "99", !is.na(degrees)) %>%
  mutate(AWLEVEL=as.numeric(AWLEVEL),MAJORNUM=as.numeric(MAJORNUM))

totals = data %>%
  filter(AWLEVEL==5) %>%
  group_by(year) %>% 
  summarize(year_total = sum(degrees, na.rm=T), people_total = sum(degrees[MAJORNUM==1], na.rm=T))

long_term = read_tsv("long_term.txt")
long_term2 = read_csv("long_term_gender.csv") %>% gather(variable, degrees, -year) %>% separate(variable, c("gender","Discipline")) %>% filter(year < 2000) %>% mutate(gender = ifelse(gender=="Men", "men", "women"))

gender_totals = long_term2 %>% filter(Discipline=="All") %>% select(-Discipline) %>% spread(gender, degrees) %>% 
  bind_rows(data %>% filter(AWLEVEL==5, MAJORNUM==1, year > 1999) %>% group_by(year, gender) %>% summarize(degrees = sum(degrees)) %>%  ungroup %>% spread(gender, degrees))

ltotals = totals %>% group_by(year) %>% summarize(year_total = sum(year_total)) %>% mutate(source="IPEDS") %>% bind_rows(
  long_term %>% mutate(source="Old", year_total = total) %>% select(year=Year, year_total, people_total=total, source )
  ) %>% left_join(gender_totals)

pop = read_csv("pop_estimates.csv") %>% select(-junk)

tot_degrees = ltotals %>% group_by(year) %>% summarize(total_degrees = max(year_total))

```



Ten years after the great recession, the history major is at a nadir. In 2008, the National Center for Education Statistics reported 34,642 majors in the field; in 2017, the most recent year for which data is available, the number was 24,266. Even as university enrollments have grown, history has seen its position dramatically eroded; of all the fields I've looked at (image 1), history has fallen more than any other except for the ill-defined "Humanities/Humanistic Studies" major.


```{r, fig.height=8, fig.width=9}
plottable = data %>% filter(AWLEVEL==5) %>% group_by(MAJORNUM) %>%
  into_major_nums %>% acadjoin


y1 = 2013
y2 = 2017
changes = plottable %>% filter(year %in% c(y1, y2)) %>% ungroup %>% mutate(year = ifelse(year==y1, "y1", "y2")) %>% group_by(year, MAJORNUM, Discipline) %>% summarize(degrees = sum(degrees)) %>% spread(year, degrees, fill = 1)

plottable %>% filter(Discipline=="History") %>% group_by(CIPCODE) %>% summarize(count=n())
#data %>% filter(CIPCODE=="54.0104", year==2017,AWLEVEL==5) %>% inner_join(characteristics) %>% select(INSTNM, degrees, race, gender) %>% arrange(-degrees)

changes %>% filter(Discipline == "History")
changes %>% filter(`y1` > 200, `y2` > 200) %>% ggplot() + aes(x = `y1` + `y2`, y = `y2` / `y1`, label = Discipline) + geom_text() +scale_y_continuous(trans="log") + scale_x_continuous(trans='log')
?reorder
?filter
changes %>% filter(!is.na(Discipline)) %>% group_by(MAJORNUM) %>% mutate(y1t = sum(y1), y2t = sum(y2)) %>% mutate(cutoff = ifelse(MAJORNUM == 1, .05, .1)/100) %>% ungroup %>% arrange(MAJORNUM) %>% filter(y1/y1t > cutoff, y2/y2t > cutoff)  %>% mutate(change = `y2` / `y1`) %>% ggplot() + aes(pch = factor(MAJORNUM), y = change, x = reorder(Discipline, change, function(x) {x[1]}), color= factor(MAJORNUM)) + 
  geom_point() + labs(title="Change in degrees, 2008-2017", x = "Major", color = "Primary or secondary major", pch = "Primary or secondary major", caption = "Sources: NCES IPEDS data, taxonomy adapted from American Academy of Arts and Sciences.") + 
  coord_flip() + scale_y_log10(breaks = c(.5, .66, .8, 1, 1.25, 1.5, 2, 3), labels=scales::percent) + theme_bw() + scale_x_discrete("Major") + theme(legend.position = "top")


if (FALSE) {
  # race data
data %>% filter(AWLEVEL==5, MAJORNUM==1) %>% group_by(race, year, CIPCODE) %>% filter(race!="All") %>% summarize(degrees=sum(degrees)) %>% acadjoin %>% filter(year > 2013) 
d2 = data %>% filter(AWLEVEL==5, MAJORNUM==1) %>% group_by(race, year, CIPCODE) %>% filter(race!="All") %>% summarize(degrees=sum(degrees)) %>% acadjoin %>% filter(year > 2013)

d2 %>% count(race)
nonwhite = d2 %>% group_by(Discipline, Bachelors) %>% filter(!race %in% c("White", "Nonresident alien", "Unknown")) %>% summarize(nonwhite = sum(degrees)) 
nonasian = d2 %>% group_by(Discipline, Bachelors) %>% filter(!race %in% c("White", "Nonresident alien", "Unknown", "Asian")) %>% summarize(minority2 = sum(degrees)) 
white = d2 %>% group_by(Discipline, Bachelors) %>% filter(race == "White") %>% summarize(white = sum(degrees))

white %>% inner_join(nonwhite) %>% inner_join(nonasian) %>% 
  mutate(total = white + nonwhite) %>%
  mutate(nonasian_minority_share = minority2/total, nonwhite_share = nonwhite/total) %>%
  select(nonwhite_share, nonasian_minority_share, Discipline, Bachelors) %>% 
  gather(metric, share, -Discipline, -Bachelors) %>%
  ggplot(aes(x=reorder(Discipline, share), y = share, color = Bachelors, pch = metric)) + coord_flip() + geom_point() + labs(title = "Majors by share of degrees to minorities", caption = "Excluding non-resident aliens, 'Unknown'.\nCircles show percentage minority non-white and non-Asian")
}
changes %>% filter(!is.na(Discipline)) %>% group_by(MAJORNUM) %>% mutate(y1t = sum(y1), y2t = sum(y2)) %>% mutate(cutoff = ifelse(MAJORNUM == 1, .05, .1)/100) %>% ungroup %>% arrange(MAJORNUM) %>% filter(y1/y1t > cutoff, y2/y2t > cutoff)  %>% mutate(change = `y2` / `y1`) %>% ggplot() + aes(pch = factor(MAJORNUM), y = change, x = reorder(Discipline, change, function(x) {x[1]}), color= factor(MAJORNUM)) + 
  geom_point() + labs(title="Change in number of degrees awarded, 2013-2017", x = "Major", color = "Primary or secondary major", pch = "Primary or secondary major", caption = "Sources: NCES IPEDS data, taxonomy adapted from American Academy of Arts and Sciences.") + 
  coord_flip() + scale_y_log10(breaks = c(.5, .66, .8, 1, 1.25, 1.5, 2, 3), labels=scales::percent) + theme_bw() + scale_x_discrete("Major") + theme(legend.position = "top")


changes
```

```{r}
library(zoo)
filled = plottable %>% filter(MAJORNUM==1) %>% group_by(Discipline, year) %>% summarize(share = sum(degrees)/year_total[1]) %>% spread(year, share, fill=0) %>% gather(year, share, -Discipline) %>% mutate(year = as.numeric(year)) %>% arrange(Discipline, year)

changes = filled %>% group_by(Discipline) %>% mutate(change = round((share)/lag(share, 1), 4))

median(c(1,2,3, NA))
library(RcppRoll)
my_median = function(ns) {
  return(median(ns))
  ns = sort(ns)[2:(length(ns) -1)]
  median(ns)
}

topfalls = changes %>% mutate(change = ifelse(share==0, NA, change)) %>% mutate(med = rollapply(change, FUN= my_median, width = 8, align="right", na.pad=TRUE)) %>% filter(is.finite(med), share > 1/1000) %>% arrange(med) %>% mutate(med = round((med), 4), share = 100*share) %>% group_by(Discipline) %>% 
  arrange(med)

tops = topfalls %>% head(30) %>% filter(!is.na(Discipline)) %>% pull(Discipline) %>% unique()

filled %>% filter(Discipline %in% tops) %>% ggplot() + geom_line(aes(x=year, y = share, color=Discipline)) + expand_limits(y=0)

```

```{r}

```

```{r}
majornums = data %>% 
  filter(AWLEVEL==5) %>%
  group_by(year, CIPCODE, MAJORNUM, gender) %>%
  summarize(degrees = sum(degrees)) %>%
  acadjoin()

new_series = majornums %>%
  group_by(year, Discipline, gender) %>%
  filter(Bachelors=="Humanities", MAJORNUM==1) %>%
  summarize(degrees = sum(degrees, na.rm=T)) %>%
  ungroup %>% 
  filter(!is.na(Discipline)) %>%
  group_by(Discipline, year, gender) %>%
  summarize(degrees = sum(degrees, na.rm=T)) %>%
  ungroup %>% 
  inner_join(totals) %>% 
  mutate(percent = degrees/year_total) %>%
  group_by(Discipline) %>% 
  group_by(Discipline) %>%
  mutate(size = factor(round(.5 + log(mean(percent), base = 9))))

joint_series = long_term2 %>% mutate(source = "old") %>% select(year, Discipline, gender, degrees = degrees, source) %>% 
  filter(Discipline != "All", year < 2000) %>% 
  bind_rows(
    new_series %>% 
      #filter(grepl("(English Language and Literature|History|Languages|Philosophy)", Discipline)) %>% 
      filter(!grepl("Liberal Studies)", Discipline)) %>%
      select(year, Discipline, degrees, gender) %>% mutate(source="new") %>% filter(year >= 2000)
  ) %>% 
  mutate(Discipline = fct_recode(Discipline, c("English" = "English Language and Literature"), c("Languages" = "Languages and Literatures Other than English"))) %>%
  inner_join(pop) %>%
  inner_join(tot_degrees) %>%
  group_by(Discipline, gender) %>% 
  mutate(years = sum(degrees)) %>%
  mutate(longterm = years > 300000) %>%
  distinct(year, Discipline, gender, .keep_all = T)

```

```{r}
this_plot = joint_series %>% filter(Discipline %in% c("History")) %>% group_by(year, total_degrees, gender) %>% summarize(humanities=sum(degrees)) %>% filter(year >= 1950) %>% inner_join(gender_totals %>% gather("gender", "total", men, women))

#this_plot %>% ggplot() + geom_text(data = this_plot %>% filter(year %in% c(1955, 1960, 1964, 1967, 1969, 1971, 1973, 1977, 1984, 1993, 2000, 2006, 2013, 2017))) + geom_path() + aes(x=total, y = humanities, label=year, color=gender) + expand_limits(y = 0, x = 0) + scale_y_continuous("Degrees in English, Philosophy, History, Languages", labels = scales::comma) + scale_x_continuous("Overall BA degrees", labels = scales::comma)

labels = frame_data(
  ~label, ~gender, ~percent, ~year,
  "Women", "women", .01, 1978,
  "Men", "men", .05, 1977
)

fig2 = this_plot %>% mutate(percent = humanities/total) %>% ggplot() + aes(x=year,  y = percent, color=gender) + geom_line(lwd=1.2) + theme_bw() + scale_y_continuous("History as percent of all degrees", labels=scales::percent, trans="log", breaks = seq(.005, .06, by = .005)) + expand_limits(y=0) + theme(legend.position="none") + labs(title="Long-term History Degree share in American Universities") + scale_color_brewer(palette = "Accent", type="qual") + geom_text(data = labels, size=5, aes(label = label))
fig2
```


```{r}

cha

```

Perhaps most alarming is that the recent decline has hit
liberal arts colleges and more elite universities--which avoided the worst of the plunge in the 70s--quite hard.
While writers often worry
too much about the most prestigious universities, they have always been
one of the only places where the humanities were central to the mission
of higher education. Elite liberal arts colleges have historically been
about evenly divided between the sciences, social sciences, and
humanities. But in the last decade, their humanities majors have fallen
from a third to well under a quarter of all degrees. Elite research
universities, too, have seen a drop to about 70 percent of their
pre-crisis numbers. The rare schools *not* to have a seen a drop in
humanities enrollments tend to be regional comprehensive universities
that never had much of a specialty in the humanities to begin with.

```{r}
top30LA = characteristics %>% filter(grepl("^(Williams|Amherst|Bowdoin|Swarthmore|Wellesley|Middlebury|Pomona|Carleton|Claremont McKenna|Davidson|Washington and Lee|Colby|Colgate|Harvey Mudd|Smith|Vassar|Grinnell|Hamilton|Haverford|Wesleyan University|Bates|Colorado College|University of Richmond|Oberlin College|Scripps College|Bryn Mawr)", INSTNM), CARNEGIE==31) %>% mutate(elite = TRUE) %>% select(UNITID, elite)

top30 = characteristics %>% 
  filter(grepl("Harvard|Yale|Princeton|Dartmouth|University of Pennsylvania|Brown|University of Chicago|Stanford|Columbia University|Duke|Massachusetts Institute|University of Pennsylvania|Johns Hopkins|California Institute|Northwestern|Cornell|Rice|Notre Dame|Vanderbilt|Washington University|Georgetown|Berkeley|Southern California|Carnegie Mellon|Los Angeles|University of Virginia|Tufts|Ann Arbor|Wake Forest|Chapel Hill",INSTNM), CARNEGIE==15) %>% 
  mutate(elite = TRUE) %>% 
  select(UNITID, elite)


charelite = top30LA %>% rbind(top30) %>% right_join(characteristics)# %>% left_join(HSIs)

charelite = charelite %>% mutate(
  label = 
    case_when(
      elite ~ case_when(
        CARNEGIE == 15 ~ "Elite Research Universities",
        CARNEGIE == 31 ~ "Elite Liberal Arts Colleges"
      ),
      HBCU == 1 ~ "HBCU",
      CARNEGIE %in% c(15, 16) ~ "Research Universities",
      CARNEGIE %in% c(21, 22) ~ "Masters College/University",
      CARNEGIE %in% c(31, 32) ~ "Bachelor's Colleges",
      TRUE ~ "Other"
    )
)

d4 = data %>% filter(AWLEVEL==5, MAJORNUM == 1) %>% 
  group_by(year, CIPCODE, UNITID) %>% 
  summarize(degrees = sum(degrees)) %>%
  left_join(amadjusted)

totals = d4 %>% 
  group_by(year, UNITID) %>% 
  summarize(year_total = sum(degrees, na.rm=T), people_total = sum(degrees, na.rm=T)) %>%
  inner_join(charelite) %>%
  group_by(label, year) %>% summarize(year_total = sum(year_total, na.rm=T))


elite_humanities = d4 %>% 
  filter(Bachelors=="Humanities") %>% 
  group_by(UNITID, year, Discipline) %>% 
  summarize(degrees = sum(degrees)) %>%
  inner_join(charelite) %>% 
  group_by(year, label) %>%
  filter(Discipline != "Communication", Discipline != "General Humanities/Liberal Studies") %>%
  summarize(degrees = sum(degrees, na.rm = T)) %>%
  inner_join(totals) %>%
  filter(label != "Other", year > 1997) %>%
  group_by(label) %>%
  mutate(percent = (degrees/year_total), relative = (degrees/year_total)/(degrees/year_total)[year==2007])

fig4 = elite_humanities %>%
  ggplot() + aes(x=year, y = percent, color=label, label = label) + geom_line() + 
  labs(title = "Humanities degree share by institution class", 
       subtitle = "'Elite' schools in the top 30 per US News and World Report",
       caption = "Ben Schmidt, 2018. Data from IPEDS.\n2000 Carnegie classifications. Not including military academies.") + 
  scale_y_continuous("Percent of degrees at institution type", label = scales::percent) + 
  geom_text(data = elite_humanities %>% filter(label != "Other", year == 1998), adj=1,nudge_x = -.1) + expand_limits(y=0, x = 1989) + theme_bw() +  theme(legend.position="none")

fig4$data %>% write_csv("outputs/fig4.csv")

fig4
```

At these elite colleges, essentially every field of the humanities has
fallen in share. History and English are both at about half their pre-recession peaks. 
Even fields like classics and area studies, which grew
through the 2000s have declined at least 20 percent from their peak; religion is down by almost two-thirds. 
The only bright spot is linguistics, the rare field that directly bridges the humanities and the sciences directly.

```{r}

p3 = charelite %>% filter(elite) %>% left_join(data) %>% filter(AWLEVEL==5, MAJORNUM==1) %>%
  mutate(gender="all") %>%
  group_by(gender) %>% 
  into_major_nums %>%
  acadjoin %>%
    group_by(Bachelors, Discipline, year) %>%
    filter(Bachelors=="Humanities") %>% 
#    filter(Type %in% c("English","History","Languages and Literature","Philosophy")) %>%
    summarize(degrees = sum(degrees), percent = sum(degrees)/year_total[1]) %>%
  filter(year > 1997) %>%
  mutate(relative = 1 - percent/max(percent), peak_year = year[percent==max(percent)][1])

fig5 = p3 %>% filter(year==2017, Discipline != "Agriculture") %>% 
  ungroup %>%
  mutate(Discipline = paste0(Discipline, " (peak ", peak_year, ")")) %>% arrange(relative) %>% ungroup %>% select(relative, peak_year, Discipline, percent) %>% ggplot() + geom_point(aes(size=percent, x=reorder(Discipline, peak_year), y = -relative)) + coord_flip() + scale_y_continuous("Change from peak", labels = scales::percent,breaks=seq(-.6, 0, .1)) + scale_x_discrete("Discipline") + scale_size_continuous("Percentage\nof degrees\nin 2017", trans="sqrt", labels = scales::percent, breaks = c(.01, .05, .25, 1, 2)/100) + labs(title="Fall at elite colleges\nin share of humanities majors", caption = "Ben Schmidt, 2018: Data from IPEDS, taxonomy from American Academy") + expand_limits(y=0) + theme_bw() 

fig5$data %>% write_csv(path = "outputs/fig5.csv")

fig5

```


The timing and placement of the drops at a variety of institutions foils
many common explanations for why the humanities are falling. Do you
think students are put off by liberal pieties in the classroom? It's
difficult to square that argument with the two decades of stability that
followed the beginning of the culture wars in the late 1980s; nor has
postmodernism completely swept the field at schools like Brigham Young's
main campus (down 20 percent) or Bob Jones University (down 50 percent).
Do you blame student loans and the cost of college? Then why has the
decline been nearly as strong at schools where student debt is almost
non-existent, like Princeton University (down 28 percent) and the
College of the Ozarks (down 44 percent)?

One common explanation *does* line up with the data fairly well, at
least in part: that students fled the humanities after the financial
crisis because they became more fearful of the job market. The chart
below shows, in individual panels, a few dozen of the most common
majors. The fields that have risen in the past decade are almost
entirely STEM majors, including nursing, engineering, computer science,
and biology. Quantitative social sciences like economics and psychology
have held steady, while fields in closer proximity to the humanities
like political science, sociology, and anthropology have shown declines,
especially since 2011. 

```{r, fig.width=12, fig.height=12}
source("EDA_functions.R")

majornums = data %>% filter(AWLEVEL==5) %>% group_by(year, CIPCODE) %>% summarize(degrees = sum(degrees)) %>% acadjoin %>% filter(year > 1998)
majornums$Bachelors[is.na(majornums$Bachelors)] = "Other/Unknown"
majornums$Discipline[is.na(majornums$Discipline)] = "General"

?fct_recode
fig6 = majornums %>% group_by(Bachelors) %>% group_by(Bachelors, Discipline, year) %>% 
  summarize(degrees=sum(degrees)) %>% group_by(year) %>% mutate(percent = degrees/sum(degrees)) %>% 
  mutate(Bachelors = factor(Bachelors) %>% forcats::fct_recode(Misc = "Other/Unknown")) %>%
  mutate(label = paste(Bachelors, Discipline, sep=": ")) %>%
  group_by(label) %>% filter(year > 1998, (sum(degrees) > 150000 || (Bachelors=="Humanities" && sum(degrees) > 10000))) %>% 
  ggplot() + geom_line(aes(x=year, y = percent, color = Bachelors)) + facet_wrap(~label, scales="free_y", labeller = labeller(label = label_wrap_gen(28)), ncol = 5) + expand_limits(y=0) + scale_y_continuous(labels = scales::percent) + theme_bw() + theme(legend.position = "none") + labs(title="Degree Share of common majors", subtitle="Data from NCES IPEDS: Taxonomy building on American Academy of Arts and Sciences.\nBen Schmidt, 2018")+ scale_x_continuous(breaks=seq(1996, 2017, by=4))
fig6$data %>% write_csv(path = "outputs/fig6.csv")
fig6 %>% ggsave(plot = ., filename = "panels.png", width=12, height = 12)
```

This may seem like a roundabout way to present the conventional wisdom
that STEM majors are the only safe bet in the modern economy, and the
humanities are dying out because kids no longer have the luxury of a
useless major. But there's an extremely important caveat: Students
aren't fleeing degrees with poor job prospects. They're fleeing
humanities and related fields, specifically, because they *think* they
have poor job prospects. If the whole story were a market response to
student debt and the great recession, students would have [read the 2011
census report naming communication and psychology among the lowest-earning degrees](https://www.census.gov/newsroom/releases/archives/education/cb12-196.html)
and fled from them. Or they would have noticed that
biology majors make less than the average college graduate, and favored
the physical sciences.

For almost a decade, the census has been regularly asking a random sample of Americans about their college major.
This gives us far rich information about career
outcomes than the lists of starting salaries that occasionally
circulate. Some commonly-held wisdom is true--engineers make more money
than any other field---but the results are most surprising for how trivial the
differences between most majors turn out to be. Humanities majors
[have the highest medical school acceptance rates of any field](https://www.aamc.org/download/321496/data/factstablea17.pdf), 
show [lower rates of long-term underemployment that most fields](https://www.myajc.com/blog/get-schooled/opinion-you-can-make-more-than-lattes-with-that-humanities-degree/p63EL6SfM2o6DLd6exVnRM/),
and [humanities majors under the age of 35 are *less* likely to be unemployed than life-science or social-science
majors.](https://www.humanitiesindicators.org/content/indicatordoc.aspx?i=10919#fig10922)

Still, the [balance of evidence](https://nces.ed.gov/programs/coe/pdf/coe_sbc.pdf) suggests that humanities majors are probably
slightly worse off than average---maybe as much as one more point of
unemployment and \$5,000 to \$10,000 a year in income. They aren't alone, of course: while finance and
computer science majors make more, biology and business majors make
about the same, and psychology majors usually come out worse.
Other factors, like gender, matter more: [Men with terminal humanities
BAs make more money than women in any field but
engineering.](https://www.humanitiesindicators.org/content/indicatordoc.aspx?i=64)
Being the *type of person* inclined to view a college major in terms of
return on investment will probably make a much bigger difference in your
earnings than the actual major does.

In other areas of the economy, we view these kinds of differences with
equanimity. The difference between humanities majors and science majors,
in median income and unemployment, is roughly the same as the difference between
residents of Virginia and North Carolina. If someone told to me not to
move to Charlotte because no one there makes a living, I would never
take them seriously. But worried relatives express the same concerns
about classics majors every day, with no sounder evidence.

It would be better if students knew the actual data about majors---or,
at least, if there were some psychology-major jokes to go along with the
ones about art historians. But the idea that students should choose
majors by trying to guess what the job market will reward several years
later is often nuts. There are some consistent trends; nursing remains a
solid bet for the risk-averse. Other majors, though, may prove greater
gambles. As humanities degrees have fallen at elite schools, degrees in
computer science have climbed much more quickly than at other schools.
In the top 30 universities, according to *U.S. News*, there are now
about as many degrees awarded in computer science and electrical engineering as in history,
English, languages, philosophy, and area studies
put together. Set aside fears about what this will do to cocktail
conversation down at the yacht club; how are students supposed to know when the
U.S. is precisely three years away from having the right number of Ivy
League graduates who can code onto a whiteboard?
Computer science degrees have already tumbled once in response to shifts
in the job market, after the dot-com crash; I wouldn't want to promise
18-year-olds today that a computer science degree will make them stand
out on the job market in 2022.

```{r fig.width=6, fig.height=4}
source("EDA_functions.R")

majornums = charelite %>% filter(elite) %>% left_join(data) %>% filter(MAJORNUM==1, AWLEVEL==5) %>% 
  group_by(year, CIPCODE, CARNEGIE) %>% summarize(degrees = sum(degrees)) %>% 
  acadjoin %>% filter(year > 1998)

m2 = majornums %>% group_by(Bachelors) %>% group_by(Bachelors, Discipline, year, CARNEGIE) %>% summarize(degrees=sum(degrees)) %>% group_by(year, CARNEGIE) %>% mutate(percent = degrees/sum(degrees)) %>% 
  group_by(Discipline, Bachelors, CARNEGIE) %>% filter(year > 1998)

#{m2 %>% filter(CARNEGIE==15) %>% group_by(Discipline, Bachelors) %>% tally(degrees) %>% arrange(-n) %>% filter(Bachelors=="Humanities")}$Discipline

fig7 = m2 %>% filter(CARNEGIE==15) %>% ungroup %>% 
  mutate(Discipline = case_when(
    Discipline=="Communication" ~ "nne",
    Discipline=="Study of the Arts" ~ "nne",
    Discipline %in% c("English Language and Literature" ,             "History", "Languages and Literatures Other than English", "Area Studies", "Philosophy","Comparative Literature") ~ "English, History,\nLanguages and Literature,\nArea Studies and Philosophy",
  grepl("Computer|lectrical", Discipline) ~ "Computer Science/\nElectrical Engineering",
  TRUE ~ "nne"
)) %>% filter(Discipline!="nne") %>%
#  filter(Bachelors=="Humanities" | grepl("Computer|Electrical Engineering", Discipline)) %>%
  group_by(Discipline, year, CARNEGIE) %>%
  summarize(share = sum(percent, na.rm=T)) %>% ggplot() + 
  labs(title="Computer Science and select Humanities degrees at elite universities", caption="Data from IPEDS: using the top 30\nresearch universities per US News & World Report")+ 
  geom_line(aes(x=year, y = share, color=Discipline)) + expand_limits(y=0) + scale_y_continuous(labels = scales::percent) + theme_bw() #+ theme(legend.position = "none") + labs(title="")
fig7

fig7$data %>% write_csv(path = "outputs/fig7.csv")
```

So does the crisis in the humanities actually reflect a shift in what
students want to select as a major, or is it just a change in what they
think they *should* choose as a major? If students legitimately find
computers more interesting than history in the age of Facebook, the fall
of the humanities might not be a bad thing. Suppose college tuition was
free and every first-year had a guaranteed job lined up for after
graduation. This parallel universe does exist at the military service
academies---and at West Point, Annapolis, and Colorado Springs,
humanities majors are at about the same level as they were in 2008.

There also doesn't seem to be an extraordinary change in what students
say they want to get out of a college education. Decades of studies of
college freshman have asked incoming students how important various (and
nonexclusive) life goals are to them in the context of their college
decisions. The drop in humanities majors in the 1970s, [Dennis Ahlburg
and Evan Roberts show in a soon-to-be-published
book](https://www.routledge.com/The-Changing-Face-of-Higher-Education-Is-There-an-International-Crisis/Ahlburg/p/book/9781138244832),
corresponded to a great inversion. In 1970, seven in 10 students thought
it was very important or essential to "develop a meaningful philosophy
of life" through education while about four in 10 (and five in 10 men)
put a priority on using it to "make more money." By the mid-'80s, these
ratios had flipped. Of all the statistics on the humanities I've seen, I
find this one the most depressing---for the past 40 years, the
percentage of first-year college students who think highly enough of
crafting a life philosophy in the course of their studies to muster the
energy to fill out a bubble indicating as much has flatlined below half.
It's little wonder that so few major in the liberal arts in the end. But
although Alburgh and Roberts find a slight tick down in their time
series since 2008 (offsetting a post-2001 rise in students seeking the
mysteries of life), the current numbers are safely within the range of
the last decades.

A few signs suggest the decline might, eventually, end as quickly as it
came on. [There are scattered stories of a return to history classes in
the age of
Trump](https://qz.com/1000017/donald-trump-saves-college-history/)
(although nationwide enrollment numbers don't yet bear it out). Thanks
to an anti-affirmative action lawsuit against Harvard, that school
released information on its applicant pool, 10,000 or so students who
imperfectly track the students who will end up scattered across liberal
arts colleges and universities. It showed that in the class of 2019, the
rush out of humanities disciplines may have slowed for the first time in
years. And the speed at which humanities majors are dropping has
decreased in the last few years, after the freefall between 2011 and
2014.

The humanities, in other words, will almost certainly survive, even if
they don't return to being true peers of the social sciences and
sciences in American higher education. To admit the humanities are in
crisis doesn't mean conceding that they are being driven extinct. It
means, instead, that their place is diminishing, changing both them and
the university as whole. The decisions and rhetoric around the
humanities now have especial importance, as journals, libraries, and
universities have to make new sets of decisions around what shape the
new humanities will take.

What comes next will be different. The humanities of the boom years in
the '60s circled around a tightly constrained common core of English and
history. At their best they helped to sustain, recreate, and improve a
shared culture that enriched American life; at their worst, they served
as a conduit for carefully controlled cultural capital, and ensured that
whole classes of people would see that culture as not being for people
like them. These fields have not completely abandoned the canon (yes,
[colleges still teach
Shakespeare](http://doctorcleveland.blogspot.com/2015/04/no-colleges-still-teach-shakespeare.html)),
but few would still claim they serve as stewards of American
civilization.

While history, English, and the rest have faded, only one set of
humanities fields without a foot in the sciences has clearly held its
own: the much newer (and smaller) disciplines the statistical agency
joins together as ethnic, gender, and cultural studies. (It is possible
that media studies has also retained share or grown, but hard to tell
from the data.) Relatedly, I've only found one large class of schools
where humanities enrollments have held steady: historically black
colleges and universities. HBCUs are also the only institutional class
where a majority of students say they're dedicated to crafting a
philosophy of life.

Even as the command of culture becomes less important to education at elite locations,
some humanities may be demonstrating more usefulness than ever to
students who seek to better understand culture from outside the dominant
perspective. The question is how much space any of the humanities can
ultimately take up in a university, when the dominant perspective
continues to warn students away. 
